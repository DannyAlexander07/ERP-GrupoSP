SPEAS - Sistema ERP Integral
SPEAS es un sistema de planificación de recursos empresariales (ERP) diseñado para la gestión integral de empresas de servicios. Desarrollado con un stack moderno de JavaScript, permite un control detallado sobre las operaciones comerciales y financieras, desde la gestión de clientes y proyectos hasta la contabilidad automatizada y la generación de reportes financieros.

Tabla de Contenidos
Características Principales

Stack Tecnológico

Instalación y Puesta en Marcha

Prerrequisitos

Base de Datos

Backend

Frontend

Estructura del Proyecto

Próximos Pasos

Características Principales
Dashboard Gerencial: Visualización en tiempo real de KPIs, flujo de caja, rentabilidad por cliente y más, a través de gráficos interactivos.

Módulo de Maestros: Gestión centralizada de Clientes, Proveedores y Servicios.

Ciclo de Ventas: Creación y seguimiento de Facturas de Venta, con cálculo de saldos pendientes.

Ciclo de Compras: Registro de Facturas de Compra (Obligaciones) y control de cuentas por pagar.

Módulo de Tesorería:

Gestión de Cuentas Bancarias Propias.

Registro de Pagos Realizados y Recibidos.

Manejo de Saldos a Favor de clientes (pagos por adelantado).

Módulo de Contabilidad:

Plan de Cuentas personalizable.

Generación automática de asientos contables a partir de ventas y compras.

Gestión de Proyectos y Préstamos: Seguimiento de proyectos y control de planes de pago para préstamos recibidos u otorgados.

Reportes Financieros y Fiscales:

Generación de Libros Electrónicos (PLE) para SUNAT (Compras y Ventas).

Emisión del Estado de Resultados por rango de fechas.

Emisión del Balance General a una fecha de corte.

Configuración y Seguridad: Gestión de Usuarios, Empresas y Roles con un sistema de permisos en el backend.

Stack Tecnológico
Backend
Lenguaje: TypeScript

Entorno: Node.js

Framework: Express.js

Base de Datos: PostgreSQL

Autenticación: JSON Web Tokens (JWT)

Librerías Clave: pg (cliente de PostgreSQL), bcrypt (hashing de contraseñas), jsonwebtoken, cors, xlsx (exportar a Excel).

Frontend
Lenguaje: TypeScript

Framework: React 19 (con Vite)

Enrutamiento: react-router-dom

Comunicación API: axios

UI y Estilos:

CSS plano con diseño moderno.

lucide-react para iconografía.

sweetalert2 para notificaciones.

Gráficos y Visualización: react-apexcharts.

Instalación y Puesta en Marcha
Sigue estos pasos para levantar el proyecto en un entorno de desarrollo.

Prerrequisitos
Node.js (versión 18 o superior)

npm o yarn

PostgreSQL (versión 14 o superior)

Base de Datos
Crear la Base de Datos: Abre tu cliente de PostgreSQL (pgAdmin, DBeaver) y crea una nueva base de datos.

SQL

CREATE DATABASE bd_erp;
Ejecutar el Esquema Inicial: Abre el archivo .sql original que contiene todas las sentencias CREATE TABLE y ejecútalo sobre la base de datos bd_erp.

Ejecutar las Actualizaciones del Esquema: Hemos realizado mejoras en la base de datos. Ejecuta los siguientes comandos para aplicar las actualizaciones:

SQL

-- 1. Añadir columna de saldo a favor en clientes
ALTER TABLE public.clientes ADD COLUMN saldo_a_favor numeric(18, 2) NOT NULL DEFAULT 0.00;

-- 2. Cambiar el tipo de la columna logo_url en empresas
ALTER TABLE public.empresas ALTER COLUMN logo_url TYPE TEXT;

-- 3. Convertir todas las llaves primarias a autoincrementables (IDENTITY)
-- (Ejecuta esto para cada tabla principal para evitar errores de llave duplicada)
DO $$
DECLARE
    rec RECORD;
BEGIN
    FOR rec IN 
        SELECT tc.table_name, kcu.column_name
        FROM information_schema.table_constraints AS tc 
        JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name
        JOIN information_schema.columns AS c ON c.table_name = tc.table_name AND c.column_name = kcu.column_name
        WHERE tc.constraint_type = 'PRIMARY KEY' AND c.data_type = 'integer'
    LOOP
        EXECUTE format('ALTER TABLE public.%I ALTER COLUMN %I DROP DEFAULT;', rec.table_name, rec.column_name);
        EXECUTE format('ALTER TABLE public.%I ALTER COLUMN %I ADD GENERATED BY DEFAULT AS IDENTITY;', rec.table_name, rec.column_name);
    END LOOP;
END $$;
Insertar Datos Esenciales: Ejecuta el script SQL que te proporcioné para insertar los permisos, roles y datos maestros básicos (monedas, tipos de comprobante, etc.).

Backend
Navega a la carpeta backend: cd backend

Instala las dependencias: npm install

Crea un archivo .env en la raíz de /backend y añade tus variables de entorno. Puedes usar este ejemplo:

Fragmento de código

PORT=4000
DB_USER=postgres
DB_HOST=localhost
DB_DATABASE=bd_erp
DB_PASSWORD=tu_contraseña_de_postgres
DB_PORT=5432
JWT_SECRET=tu_secreto_muy_seguro_para_jwt
Inicia el servidor de desarrollo: npm run dev
El servidor estará corriendo en http://localhost:4000.

Frontend
Abre una nueva terminal y navega a la carpeta frontend: cd frontend

Instala las dependencias: npm install

Inicia el cliente de desarrollo: npm run dev
La aplicación estará disponible en http://localhost:5173.